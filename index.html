<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- 原标题保持不变，后面会用JS动态插入年份 -->
    <title>RackNerd 特价VPS - 高性价比年付便宜VPS推荐</title>
    
    <!-- SEO Meta（已加入高权重关键词 + 年份会在JS里动态更新） -->
    <meta name="description" content="最新RackNerd特价VPS大全，高性价比年付KVM虚拟主机，便宜VPS实时库存，每日更新，1核1G仅$10起，支持支付宝，一键购买！">
    <meta name="keywords" content="RackNerd特价VPS,便宜VPS,RackNerd年付,洛杉矶VPS,高性价比VPS,KVM虚拟主机,海外VPS推荐">
    
    <meta property="og:title" content="RackNerd 特价VPS - 高性价比年付便宜VPS推荐">
    <meta property="og:description" content="实时更新RackNerd最新特价年付VPS，库存一目了然，最低$10/年起">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/">
    <meta property="og:image" content="/racknerd.png">
    <meta name="robots" content="index, follow">

    <link rel="shortcut icon" type="image/x-icon" href="/favicon.png" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root {
            --bg-day: linear-gradient(135deg, #f5f7ff 0%, #e0e7ff 100%);
            --bg-night: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            --card-day: rgba(255,255,255,0.95);
            --card-night: rgba(30,41,59,0.95);
            --text-day: #1e293b;
            --text-night: #e2e8f0;
            --primary: #6366f1;
            --primary-hover: #4f46e5;
        }
        *{margin:0;padding:0;box-sizing:border-box;}
        body{font-family:'Segoe UI',system-ui,sans-serif;min-height:100vh;background,var(--bg-day);color:var(--text-day);transition:all .4s;}
        body.night{background:var(--bg-night);color:var(--text-night);}
        .container{max-width:1280px;margin:0 auto;padding:20px;}
        header{text-align:center;padding:50px 20px 30px;position:relative;}
        h1{font-size:2.6em;margin-bottom:10px;background:linear-gradient(90deg,#6366f1,#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
        .subtitle{font-size:1.2em;opacity:.85;}
        .theme-toggle{position:absolute;top:20px;right:20px;background:rgba(255,255,255,.2);border:none;width:56px;height:56px;border-radius:50%;font-size:1.4em;color:#fff;cursor:pointer;backdrop-filter:blur(10px);transition:all .3s;}
        .theme-toggle:hover{transform:scale(1.1);}
        .last-update{margin-top:15px;font-size:.95em;opacity:.8;}
        .vps-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:24px;margin-top:30px;}
        .vps-card{background:var(--card-day);border-radius:20px;padding:24px;box-shadow:0 10px 30px rgba(0,0,0,.1);transition:all .3s;position:relative;overflow:hidden;}
        body.night .vps-card{background:var(--card-night);box-shadow:0 10px 30px rgba(0,0,0,.4);}
        .vps-card:hover{transform:translateY(-8px);box-shadow:0 20px 40px rgba(0,0,0,.18);}
        body.night .vps-card:hover{box-shadow:0 20px 40px rgba(0,0,0,.6);}
        .stock{position:absolute;top:12px;right:12px;padding:4px 10px;border-radius:20px;font-size:.8em;font-weight:bold;}
        .in-stock{background:#10b981;color:#fff;}
        .sold-out{background:#ef4444;color:#fff;}
        .vps-title{font-size:1.35em;font-weight:bold;margin-bottom:16px;color:var(--primary);}
        .spec{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px dashed rgba(0,0,0,.1);}
        body.night .spec{border-color:rgba(255,255,255,.1);}
        .price{font-size:2em;font-weight:bold;text-align:center;margin:20px 0 16px;color:#10b981;}
        .buy-btn{display:block;width:100%;padding:14px;background:var(--primary);color:#fff;border:none;border-radius:12px;font-size:1.1em;font-weight:bold;cursor:pointer;transition:all .3s;text-decoration:none;text-align:center;}
        .buy-btn:hover{background:var(--primary-hover);transform:translateY(-2px);}
        .buy-btn i{margin-right:8px;}
        .loading{text-align:center;padding:80px;font-size:1.3em;color:#64748b;}
        footer{text-align:center;padding:40px 20px 20px;opacity:.7;font-size:.9em;}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <button class="theme-toggle" id="themeToggle" aria-label="切换夜间模式">
                <i class="fas fa-moon"></i>
            </button>
            <h1>RackNerd 特价年付VPS</h1>
            <p class="subtitle">实时库存 · 高性价比 · 每日更新</p>
            <div class="last-update" id="lastUpdate">正在加载最新数据...</div>
        </header>

        <div id="loading" class="loading">
            <i class="fas fa-spinner fa-spin fa-2x"></i><br><br>加载中...
        </div>
        <div id="vpsGrid" class="vps-grid" style="display:none;"></div>
    </div>

    <footer>
        © 2025 RackNerd VPS 汇总 | 实时读取
        <div class="lang-switch" style="margin-top:15px;">
            中文版 | <a href="/en.html">English Version →</a>
        </div>
    </footer>

    <script>
        // 夜间模式切换
        const toggleBtn = document.getElementById('themeToggle');
        const body = document.body;
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            body.classList.add('night');
            toggleBtn.innerHTML = '<i class="fas fa-sun"></i>';
        }
        toggleBtn.addEventListener('click', () => {
            body.classList.toggle('night');
            toggleBtn.innerHTML = body.classList.contains('night') 
                ? '<i class="fas fa-sun"></i>' 
                : '<i class="fas fa-moon"></i>';
        });

        // 加载数据 + 动态插入年份到标题（关键修改）
        async function loadData() {
            try {
                const res = await fetch('data.json?t=' + Date.now());
                if (!res.ok) throw new Error('无法加载 data.json');
                const data = await res.json();

                const updateDate = new Date(data.date_utc);
                const year = updateDate.getFullYear();

                // 关键：只在加载成功后才动态修改标题（原标题内容不动）
                document.title = `${year}年最新 ${document.title}`;

                // 顺便同步更新 meta description 和 keywords 中的年份
                document.querySelector('meta[name="description"]').setAttribute('content',
                    `${year}年最新RackNerd特价VPS大全，高性价比年付KVM虚拟主机，便宜VPS实时库存，每日更新，1核1G仅$10起，支持支付宝，一键购买！`);
                document.querySelector('meta[name="keywords"]').setAttribute('content',
                    `RackNerd特价VPS,${year}年便宜VPS,RackNerd年付,洛杉矶VPS,高性价比VPS,KVM虚拟主机,海外VPS推荐`);
                document.querySelector('meta[property="og:title"]').setAttribute('content',
                    `${year}年最新 RackNerd 特价VPS - 高性价比年付便宜VPS推荐`);

                // 更新页面显示的时间
                document.getElementById('lastUpdate').textContent = 
                    `最后更新：${updateDate.toLocaleString('zh-CN', {year:'numeric', month:'2-digit', day:'2-digit', hour:'2-digit', minute:'2-digit'})}`;

                // 生成卡片
                const grid = document.getElementById('vpsGrid');
                document.getElementById('loading').style.display = 'none';
                grid.style.display = 'grid';

                data.vps.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'vps-card';
                    card.innerHTML = `
                        <div class="stock ${item.stock > 0 ? 'in-stock' : 'sold-out'}">${item.stock > 0 ? '有货' : '售罄'}</div>
                        <div class="vps-title"><i class="fas fa-server"></i> ${item.title}</div>
                        <div class="spec"><i class="fas fa-microchip"></i> CPU <span>${item.vcores} 核</span></div>
                        <div class="spec"><i class="fas fa-memory"></i> 内存 <span>${item.ram}</span></div>
                        <div class="spec rued"><i class="fas fa-hdd"></i> 存储 <span>${item.storage}</span></div>
                        <div class="spec"><i class="fas fa-exchange-alt"></i> 流量 <span>${item.bandwidth}</span></div>
                        <div class="price">$${item.price}<small style="font-size:0.5em;">/年</small></div>
                        <a href="${item.url}" target="_blank" class="buy-btn" 
                           ${item.stock === 0 ? 'style="background:#94a3b8;cursor:not-allowed;" onclick="return false;"' : ''}>
                            <i class="fas fa-shopping-cart"></i> ${item.stock > 0 ? '立即购买' : '已售罄'}
                        </a>
                    `;
                    grid.appendChild(card);
                });

            } catch (err) {
                document.getElementById('loading').innerHTML = 
                    `<p style="color:#ef4444">加载失败：${err.message}<br>请检查 data.json 是否存在</p>`;
            }
        }

        window.addEventListener('load', loadData);
    </script>
    <script src="https://www.w3counter.com/tracker.js?id=153776"></script>
</body>
</html>