<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- 原标题保持不变，JS 会自动插入年份 -->
    <title>RackNerd Promo VPS - Best Annual Deals</title>
    
    <meta name="description" content="Latest RackNerd Promo VPS Deals - Cheap Annual KVM VPS from $10/year, Real-time stock, Daily updated, Alipay supported!">
    <meta name="keywords" content="RackNerd promo,RackNerd deals,cheap VPS,annual VPS,Los Angeles VPS,best budget VPS,KVM VPS">
    
    <meta property="og:title" content="RackNerd Promo VPS - Best Annual Deals">
    <meta property="og:description" content="Latest RackNerd annual promo VPS deals with real-time stock, starting at only $10/year">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/en.html">
    <meta property="og:image" content="/racknerd.png">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="/en.html">

    <link rel="shortcut icon" type="image/x-icon" href="/favicon.png" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root{--bg-day:linear-gradient(135deg,#f5f7ff 0%,#e0e7ff 100%);--bg-night:linear-gradient(135deg,#0f172a 0%,#1e293b 100%);--card-day:rgba(255,255,255,0.95);--card-night:rgba(30,41,59,0.95);--text-day:#1e293b;--text-night:#e2e8f0;--primary:#6366f1;--primary-hover:#4f46e5;}
        *{margin:0;padding:0;box-sizing:border-box;}
        body{font-family:'Segoe UI',system-ui,sans-serif;min-height:100vh;background:var(--bg-day);color:var(--text-day);transition:all .4s;}
        body.night{background:var(--bg-night);color:var(--text-night);}
        .container{max-width:1280px;margin:0 auto;padding:20px;}
        header{text-align:center;padding:50px 20px 30px;position:relative;}
        h1{font-size:2.6em;margin-bottom:10px;background:linear-gradient(90deg,#6366f1,#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
        .subtitle{font-size:1.2em;opacity:.85;}
        .theme-toggle{position:absolute;top:20px;right:20px;background:rgba(255,255,255,.2);border:none;width:56px;height:56px;border-radius:50%;font-size:1.4em;color:#fff;cursor:pointer;backdrop-filter:blur(10px);transition:all .3s;}
        .theme-toggle:hover{transform:scale(1.1);}
        .last-update{margin-top:15px;font-size:.95em;opacity:.8;}
        .vps-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:24px;margin-top:30px;}
        .vps-card{background:var(--card-day);border-radius:20px;padding:24px;box-shadow:0 10px 30px rgba(0,0,0,.1);transition:all .3s;position:relative;overflow:hidden;}
        body.night .vps-card{background:var(--card-night);box-shadow:0 10px 30px rgba(0,0,0,.4);}
        .vps-card:hover{transform:translateY(-8px);}
        .stock{position:absolute;top:12px;right:12px;padding:4px 10px;border-radius:20px;font-size:.8em;font-weight:bold;}
        .in-stock{background:#10b981;color:#fff;}
        .sold-out{background:#ef4444;color:#fff;}
        .vps-title{font-size:1.35em;font-weight:bold;margin-bottom:16px;color:var(--primary);}
        .spec{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px dashed rgba(0,0,0,.1);}
        body.night .spec{border-color:rgba(255,255,255,.1);}
        .price{font-size:2em;font-weight:bold;text-align:center;margin:20px 0 16px;color:#10b981;}
        .buy-btn{display:block;width:100%;padding:14px;background:var(--primary);color:#fff;border:none;border-radius:12px;font-size:1.1em;font-weight:bold;cursor:pointer;transition:all .3s;text-decoration:none;text-align:center;}
        .buy-btn:hover{background:var(--primary-hover);transform:translateY(-2px);}
        .buy-btn i{margin-right:8px;}
        .loading{text-align:center;padding:80px;font-size:1.3em;color:#64748b;}
        footer{text-align:center;padding:40px 20px 20px;opacity:.7;font-size:.9em;}
        .lang-switch{margin-top:15px;}
        .lang-switch a{margin:0 10px;color:inherit;text-decoration:underline;}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                <i class="fas fa-moon"></i>
            </button>
            <h1>RackNerd Promo VPS Deals</h1>
            <p class="subtitle">Real-time Stock · Best Price · Daily Updated</p>
            <div class="last-update" id="lastUpdate">Loading latest data...</div>
        </header>

        <div id="loading" class="loading">
            <i class="fas fa-spinner fa-spin fa-2x"></i><br><br>Loading...
        </div>
        <div id="vpsGrid" class="vps-grid" style="display:none;"></div>
    </div>

    <footer>
        © 2025 RackNerd Deals | Auto-loaded
        <div class="lang-switch">
            English Version | <a href="/index.html">中文版 →</a>
        </div>
    </footer>

    <script>
        // Dark mode
        const toggleBtn = document.getElementById('themeToggle');
        const body = document.body;
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            body.classList.add('night');
            toggleBtn.innerHTML = '<i class="fas fa-sun"></i>';
        }
        toggleBtn.addEventListener('click', () => {
            body.classList.toggle('night');
            toggleBtn.innerHTML = body.classList.contains('night') ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        });

        // Load data + dynamic title year
        async function loadData() {
            try {
                const res = await fetch('data.json?t=' + Date.now());
                if (!res.ok) throw new Error('Failed to load data.json');
                const data = await res.json();

                const date = new Date(data.date_utc);
                const year = date.getFullYear();

                // Insert year into title
                document.title = `${year} ${document.title}`;

                // Update meta
                document.querySelector('meta[name="description"]').setAttribute('content',
                    `${year} Latest RackNerd Promo VPS Deals - Cheap Annual KVM VPS from $10/year, Real-time stock, Daily updated, Alipay supported!`);
                document.querySelector('meta[name="keywords"]').setAttribute('content',
                    `RackNerd promo,RackNerd deals,cheap VPS ${year},annual VPS,Los Angeles VPS,best budget VPS,KVM VPS`);
                document.querySelector('meta[property="og:title"]').setAttribute('content',
                    `${year} RackNerd Promo VPS - Best Annual Deals`);

                document.getElementById('lastUpdate').textContent = 
                    `Last updated: ${date.toLocaleString('en-US', {year:'numeric', month:'2-digit', day:'2-digit', hour:'2-digit', minute:'2-digit'})}`;

                const grid = document.getElementById('vpsGrid');
                document.getElementById('loading').style.display = 'none';
                grid.style.display = 'grid';

                data.vps.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'vps-card';
                    card.innerHTML = `
                        <div class="stock ${item.stock > 0 ? 'in-stock' : 'sold-out'}">${item.stock > 0 ? 'In Stock' : 'Sold Out'}</div>
                        <div class="vps-title"><i class="fas fa-server"></i> ${item.title}</div>
                        <div class="spec"><i class="fas fa-microchip"></i> CPU <span>${item.vcores} Core(s)</span></div>
                        <div class="spec"><i class="fas fa-memory"></i> RAM <span>${item.ram}</span></div>
                        <div class="spec"><i class="fas fa-hdd"></i> Storage <span>${item.storage}</span></div>
                        <div class="spec"><i class="fas fa-exchange-alt"></i> Bandwidth <span>${item.bandwidth}</span></div>
                        <div class="price">$${item.price}<small style="font-size:0.5em;">/year</small></div>
                        <a href="${item.url}" target="_blank" class="buy-btn" 
                           ${item.stock === 0 ? 'style="background:#94a3b8;cursor:not-allowed;" onclick="return false;"' : ''}>
                            <i class="fas fa-shopping-cart"></i> ${item.stock > 0 ? 'Buy Now' : 'Sold Out'}
                        </a>
                    `;
                    grid.appendChild(card);
                });

            } catch (err) {
                document.getElementById('loading').innerHTML = `<p style="color:#ef4444">Error: ${err.message}</p>`;
            }
        }

        window.addEventListener('load', loadData);
    </script>
</body>
</html>